{"version":3,"sources":["../src/local_my.js"],"names":["define","$","cfg","log","localmy","usereloadwaiter","init","on","toggle_cat_state","toggle_modality","global_area_ctl","toggle_detail","add_to_favorites","remove_from_favorites","refresh_course_list","length","hide","attr","each","debug","trigger","postreset","hide_home_nav","css","e","stopPropagation","preventDefault","that","matchs","exec","area","catid","parseInt","closest","url","wwwroot","first","hasClass","removeClass","addClass","get","slideUp","slideDown","modalityid","replace","val","courseid","panelid","children","matches","match","mode","index","element","handlesrc","src","html","sektor","args","Sektor","size","stroke","arc","angle","sectorColor","circleColor","fillCircle","islight","favorites","uid","view","widget","filters","activesort","activedisplay","activetime","currentdatafilter","filter","data","filterstates"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript controller for controlling the sections.\n *\n * @module     block_multicourse_navigation/collapse_control\n * @package    block_multicourse_navigation\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n// jshint unused: false, undef:false\n/* eslint-disable no-undef no-unused-vars */\ndefine(['jquery', 'core/config', 'core/log'], function($, cfg, log) {\n\n    /**\n     * SectionControl class.\n     *\n     * @param {String} selector The selector for the page region containing the actions panel.\n     */\n    var localmy = {\n\n        usereloadwaiter: false,\n\n        init: function() {\n\n            // Attach delegated togglestate handler to all handles in page.\n            $('#mydashboard .block').on('click', '.local-my-cat-collapse', [], this.toggle_cat_state);\n            $('#mydashboard .block').on('change', '.local-my-modality-chooser', [], this.toggle_modality);\n            $('#mydashboard .block').on('click', '.local-my-area-ctls', [], this.global_area_ctl);\n            $('#mydashboard .block').on('click', '.detail-handle', [], this.toggle_detail);\n            $('#mydashboard .block').on('click', '.add-to-favorites-handle', [], this.add_to_favorites);\n            $('#mydashboard .block').on('click', '.remove-from-favorites-handle', [], this.remove_from_favorites);\n\n            $('#mydashboard .block').on('click', '.course-filter', [], this.refresh_course_list);\n            $('#mydashboard .block').on('click', '.course-sort', [], this.refresh_course_list);\n            $('#mydashboard .block').on('click', '.course-display', [], this.refresh_course_list);\n            $('#mydashboard .block').on('click', '.course-time', [], this.refresh_course_list);\n            $('#mydashboard .block').on('click', '.reload-areas', [], this.refresh_course_list);\n\n            if ($('.is-accordion').length !== 0) {\n                // Is in accordion\n                $('.is-accordion .local-my-course').hide();\n                $('.is-accordion .local-my-cat-collapse > h3 > a').attr('aria-expanded', 'false');\n            }\n\n            // Launch lazy loading of all area place-holders.\n            $('.reload-areas').each(function() {\n                log.debug(\"Launching refresh on \" + $(this).attr('data-widget') + '-' + $(this).attr('data-uid'));\n                $(this).trigger('click');\n            });\n            this.usereloadwaiter = true;\n\n            log.debug('AMD Local My initialized');\n\n        },\n\n        // Refreshes all handler bindings when something is reloaded.\n        postreset: function() {\n\n            if ($('.is-accordion').length !== 0) {\n                // Is in accordion\n                $('.is-accordion .local-my-course').hide();\n                $('.is-accordion .local-my-cat-collapse > h3 > a').attr('aria-expanded', 'false');\n            }\n        },\n\n        hide_home_nav: function() {\n            $('a[data-key=\"home\"]').css('display', 'none');\n        },\n\n        toggle_cat_state: function(e) {\n\n            e.stopPropagation();\n            e.preventDefault();\n            var that = $(this);\n\n            var regex = /local-my-cathandle-([^-]+)-([0-9]+)/;\n            var matchs = regex.exec(that.attr('id'));\n            if (!matchs) {\n                return;\n            }\n            var area = matchs[1];\n            var catid = parseInt(matchs[2]);\n\n            log.debug('Working for cat ' + catid + ' in area ' + area);\n\n            if (that.closest('.is-accordion').length === 0) {\n                // This is the previous close/open mode.\n                var url = cfg.wwwroot + '/local/my/ajax/stateregister.php?';\n                url += 'item=' + area;\n                url += '&catid=' + catid;\n\n                var hide = 0;\n\n                if ($('.local-my-course-' + area + '.cat-' + area + '-' + catid).first().hasClass('collapsed')) {\n                    $('.local-my-course-' + area + '.cat-' + area + '-' + catid).removeClass('collapsed');\n                    $('#local-my-cathandle-' + area + '-' + catid + ' > h3 > a').attr('aria-expanded', 'true');\n                    log.debug('Expanding ' + area + ' in area ' + catid);\n                    hide = 0;\n                } else {\n                    $('.local-my-course-' + area + '.cat-' + area + '-' + catid).addClass('collapsed');\n                    $('#local-my-cathandle-' + area + '-' + catid + ' > h3 > a').attr('aria-expanded', 'false');\n                    log.debug('Closing ' + area + ' in area ' + catid);\n                    hide = 1;\n                }\n\n                url += '&hide=' + hide;\n\n                $.get(url, function() {\n                });\n\n            } else {\n                // This is the accordion mode.\n                $('.local-my-course-' + area).slideUp(\"normal\");\n                $('.local-my-cat-collapse-' + area + ' > h3 > a').attr('aria-expanded', 'false');\n                $('.local-my-course-' + area + '.cat-' + area + '-' + catid).slideDown(\"normal\");\n                $('#local-my-cathandle-' + area + '-' + catid + ' > h3 > a').attr('aria-expanded', 'true');\n            }\n\n            return false;\n        },\n\n        /**\n         * When administrator and using static text modules based on profile fields\n         */\n        toggle_modality: function() {\n\n            var that = $(this);\n\n            var modalityid = that.attr('id').replace('local-my-static-select-', 'local-my-static-modal-');\n            $('.local-my-statictext-modals').addClass('local-my-hide');\n            $('#' + modalityid + '-' + that.val()).removeClass('local-my-hide');\n        },\n\n        toggle_detail: function(e) {\n\n            e.stopPropagation();\n            e.preventDefault();\n            var that = $(this);\n\n            var courseid = that.attr('id').replace('detail-handle-', '');\n            var panelid = '#details-indicators-' + courseid;\n            if ($(panelid).css('display') === 'none') {\n                $(panelid).css('display', 'flex');\n                that.attr('aria-expanded', true);\n                that.children('i').removeClass('fa-caret-down');\n                that.children('i').addClass('fa-caret-up');\n            } else {\n                $(panelid).css('display', 'none');\n                that.attr('aria-expanded', false);\n                that.children('i').removeClass('fa-caret-up');\n                that.children('i').addClass('fa-caret-down');\n            }\n\n            return false;\n        },\n\n        global_area_ctl: function(e) {\n\n            var that = $(this);\n            e.stopPropagation();\n            e.preventDefault();\n\n            var regexp = /local-my-cats-([^-]+)-([^-]+)$/;\n            var matches = that.attr('id').match(regexp);\n            if (!matches) {\n                return;\n            }\n\n            var mode = matches[1];\n            var area = matches[2];\n            var url = '';\n\n            if (mode == 'collapseall') {\n                $('.local-my-course-' + area).addClass('collapsed');\n                $('.local-my-cat-collapse-' + area + ' > h3 > button > img').each( function(index, element) {\n                    var handlesrc = element.src;\n                    handlesrc = handlesrc.replace('expanded', 'collapsed');\n                    element.src = handlesrc;\n                });\n                url = cfg.wwwroot + '/local/my/ajax/stateregister.php?';\n                url += 'item=' + area;\n                url += '&catids=' + $('#local-my-areacategories-' + area).html();\n                url += '&what=collapseall';\n\n                $.get(url);\n            } else {\n                $('.local-my-course-' + area).removeClass('collapsed');\n                $('.local-my-cat-collapse-' + area + ' > h3 > button > img').each( function(index, element) {\n                    var handlesrc = element.src;\n                    handlesrc = handlesrc.replace('collapsed', 'expanded');\n                    element.src = handlesrc;\n                });\n\n                url = cfg.wwwroot + '/local/my/ajax/stateregister.php?';\n                url += 'item=' + area;\n                url += '&catids=' + $('#local-my-areacategories-' + area).html();\n                url += '&what=expandall';\n\n                $.get(url);\n            }\n\n            return false;\n        },\n\n        sektor: function(args) {\n\n            if (!('color' in args)) {\n                args['color'] = '#bb3030';\n            }\n\n            if (!('circlecolor' in args)) {\n                args['circlecolor'] = '#ddd';\n            }\n\n            /* eslint-disable */\n            log.debug(\"Sektor refresh on \" + args['id']);\n            var sektor = new Sektor(args['id'], {\n              size: args['size'],\n              stroke: 0,\n              arc: false,\n              angle: args['angle'],\n              sectorColor: args['color'],\n              circleColor: args['circlecolor'],\n              fillCircle: true\n            });\n            /* eslint-enable */\n        },\n\n        add_to_favorites: function() {\n\n            var that = $(this);\n\n            var courseid = that.attr('data-course');\n            var islight = that.hasClass('light');\n\n            var url = cfg.wwwroot + '/local/my/ajax/service.php';\n            url += '?what=addtofavorites';\n            url += '&courseid=' + courseid;\n            that.removeClass('fa-star-o');\n            that.addClass('fa-star');\n            if (islight) {\n                that.removeClass('add-to-favorites-handle');\n                that.addClass('remove-from-favorites-handle');\n            }\n\n            log.debug(\"Adding course \" + courseid + \" to favorites\");\n            $.get(url);\n\n            // Find and reload favorites.\n            var favorites = $('.favorite-courses');\n            if (favorites.length) {\n                favorites.each(function() {\n                    // find the reload-areas direct child and apply reload.\n                    $(this).children('.reload-areas').trigger('click');\n                });\n            }\n        },\n\n        remove_from_favorites: function() {\n\n            var that = $(this);\n\n            var courseid = that.attr('data-course');\n            var islight = that.hasClass('light');\n\n            var url = cfg.wwwroot + '/local/my/ajax/service.php';\n            url += '?what=removefromfavorites';\n            url += '&courseid=' + courseid;\n\n            log.debug(\"Removing course \" + courseid + \" from favorites\");\n            $.get(url);\n\n            // find on screen icon-favorites of this course and change class.\n            $('.icon-favorite[data-course=\"' + courseid + '\"]').removeClass('fa-star');\n            $('.icon-favorite[data-course=\"' + courseid + '\"]').addClass('fa-star-o');\n            if (islight) {\n                that.removeClass('fa-star');\n                that.addClass('fa-star-o');\n                that.removeClass('remove-from-favorites-handle');\n                that.addClass('add-to-favorites-handle');\n            }\n\n            // Find and reload favorites.\n            var favorites = $('.favorite-courses');\n            if (favorites.length) {\n                favorites.each(function() {\n                    // find the reload-areas direct child and apply reload.\n                    $(this).children('.reload-areas').trigger('click');\n                });\n            }\n        },\n\n        /**\n         * finds widget UID in sort or filter and refresh content of the whole widget content.\n         */\n        refresh_course_list: function() {\n            var that = $(this);\n\n            // Collect filter and sort state.\n            var uid = that.attr('data-uid');\n            var view = that.attr('data-view');\n            var widget = that.attr('data-widget');\n\n            log.debug(\"Activating sort/filter/display option on \" + uid);\n\n            var filters = $('.course-filters-' + uid + '.active');\n\n            var url = cfg.wwwroot + '/local/my/ajax/service.php';\n            url += '?what=getcourses';\n            url += '&widget=' + widget;\n            url += '&uid=' + uid;\n            url += '&view=' + view;\n            if (!that.attr('data-sort')) {\n                var activesort = $('.course-sort-' + uid + '.active');\n                if (activesort) {\n                    // Add sort if exists.\n                    url += '&sort=' + activesort.attr('data-sort');\n                }\n            } else {\n                url += '&sort=' + that.attr('data-sort');\n            }\n\n            if (!that.attr('data-display')) {\n                var activedisplay = $('.course-display-' + uid + '.active');\n                if (activedisplay) {\n                    // Add display if exists.\n                    url += '&display=' + activedisplay.attr('data-display');\n                }\n            } else {\n                url += '&display=' + that.attr('data-display');\n            }\n\n            if (!that.attr('data-time')) {\n                var activetime = $('.course-time-' + uid + '.active');\n                if (activetime) {\n                    // Add time selector if exists.\n                    url += '&schedule=' + activetime.attr('data-time');\n                }\n            } else {\n                url += '&schedule=' + that.attr('data-time');\n            }\n\n            // Process if clicked item was a filter option.\n            var currentdatafilter;\n            if (that.attr('data-filter')) {\n                currentdatafilter = that.attr('data-filter');\n                url += '&' + that.attr('data-filter') + '=' + that.attr('data-filter-value');\n            }\n\n            if (filters.length) {\n                // Add all filters of the widget. Avoid contradicting a clicked filter.\n                for (var filter in filters) {\n                    if (filter.attr('data-filter') != currentdatafilter) {\n                        url += '&' + filter.attr('data-filter') + '=' + filter.attr('data-filter-value');\n                    }\n                }\n            }\n\n            if (localmy.usereloadwaiter) {\n                $('#content-' + uid).html('<img src=\"' + cfg.wwwroot + '/pix/i/loading.gif\">');\n            }\n\n            $.get(url, function(data) {\n                $('#area-courses-' + uid).html(data.html);\n                $('#block_' + widget + '-' + uid + ' .filter-states').html(data.filterstates);\n            }, 'json');\n        }\n    };\n\n    return localmy;\n\n});\n"],"file":"local_my.min.js"}