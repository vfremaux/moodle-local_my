define(["jquery","core/config","core/log"],function(a,b,c){var d={usereloadwaiter:!1,init:function(){a("#mydashboard .block").on("click",".detail-handle",[],this.toggle_detail),a("#mydashboard .block").on("click",".add-to-favorites-handle",[],this.add_to_favorites),a("#mydashboard .block").on("click",".remove-from-favorites-handle",[],this.remove_from_favorites),0!==a(".is-accordion").length&&(a(".is-accordion .local-my-course").hide(),a(".is-accordion .local-my-cat-collapse > h3 > a").attr("aria-expanded","false")),a(".reload-areas").each(function(){c.debug("Launching refresh on "+a(this).attr("data-widget")+"-"+a(this).attr("data-uid")),a(this).trigger("click")}),this.usereloadwaiter=!0,c.debug("AMD Local My initialized")},add_to_favorites:function(){var d=a(this),e=d.attr("data-course"),f=d.hasClass("light"),g=b.wwwroot+"/local/my/ajax/service.php";g+="?what=addtofavorites",g+="&courseid="+e,d.removeClass("fa-star-o"),d.addClass("fa-star"),f&&(d.removeClass("add-to-favorites-handle"),d.addClass("remove-from-favorites-handle")),c.debug("Adding course "+e+" to favorites"),a.get(g)},remove_from_favorites:function(){var d=a(this),e=d.attr("data-course"),f=d.hasClass("light"),g=b.wwwroot+"/local/my/ajax/service.php";g+="?what=removefromfavorites",g+="&courseid="+e,c.debug("Removing course "+e+" from favorites"),a.get(g),a('.icon-favorite[data-course="'+e+'"]').removeClass("fa-star"),a('.icon-favorite[data-course="'+e+'"]').addClass("fa-star-o"),f&&(d.removeClass("fa-star"),d.addClass("fa-star-o"),d.removeClass("remove-from-favorites-handle"),d.addClass("add-to-favorites-handle"))}};return d});