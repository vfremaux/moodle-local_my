{"version":3,"sources":["../src/local_my_course_index.js"],"names":["define","$","cfg","log","usereloadwaiter","init","on","toggle_detail","add_to_favorites","remove_from_favorites","length","hide","attr","each","debug","trigger","that","courseid","islight","hasClass","url","wwwroot","removeClass","addClass","get"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript controller for controlling the sections.\n *\n * @module     block_multicourse_navigation/collapse_control\n * @package    block_multicourse_navigation\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n// jshint unused: false, undef:false\n/* eslint-disable no-undef no-unused-vars */\ndefine(['jquery', 'core/config', 'core/log'], function($, cfg, log) {\n\n    /**\n     * SectionControl class.\n     *\n     * @param {String} selector The selector for the page region containing the actions panel.\n     */\n    var localmy = {\n\n        usereloadwaiter: false,\n\n        init: function() {\n\n            // Attach delegated togglestate handler to all handles in page.\n            $('#mydashboard .block').on('click', '.detail-handle', [], this.toggle_detail);\n            $('#mydashboard .block').on('click', '.add-to-favorites-handle', [], this.add_to_favorites);\n            $('#mydashboard .block').on('click', '.remove-from-favorites-handle', [], this.remove_from_favorites);\n\n            if ($('.is-accordion').length !== 0) {\n                // Is in accordion\n                $('.is-accordion .local-my-course').hide();\n                $('.is-accordion .local-my-cat-collapse > h3 > a').attr('aria-expanded', 'false');\n            }\n\n            // Launch lazy loading of all area place-holders.\n            $('.reload-areas').each(function() {\n                log.debug(\"Launching refresh on \" + $(this).attr('data-widget') + '-' + $(this).attr('data-uid'));\n                $(this).trigger('click');\n            });\n            this.usereloadwaiter = true;\n\n            log.debug('AMD Local My initialized');\n\n        },\n\n        add_to_favorites: function() {\n\n            var that = $(this);\n\n            var courseid = that.attr('data-course');\n            var islight = that.hasClass('light');\n\n            var url = cfg.wwwroot + '/local/my/ajax/service.php';\n            url += '?what=addtofavorites';\n            url += '&courseid=' + courseid;\n            that.removeClass('fa-star-o');\n            that.addClass('fa-star');\n            if (islight) {\n                that.removeClass('add-to-favorites-handle');\n                that.addClass('remove-from-favorites-handle');\n            }\n\n            log.debug(\"Adding course \" + courseid + \" to favorites\");\n            $.get(url);\n\n            // Find and reload favorites.\n            // DO NOT RELOAD FAVORITES ON COURSE INDEX\n        },\n\n        remove_from_favorites: function() {\n\n            var that = $(this);\n\n            var courseid = that.attr('data-course');\n            var islight = that.hasClass('light');\n\n            var url = cfg.wwwroot + '/local/my/ajax/service.php';\n            url += '?what=removefromfavorites';\n            url += '&courseid=' + courseid;\n\n            log.debug(\"Removing course \" + courseid + \" from favorites\");\n            $.get(url);\n\n            // find on screen icon-favorites of this course and change class.\n            $('.icon-favorite[data-course=\"' + courseid + '\"]').removeClass('fa-star');\n            $('.icon-favorite[data-course=\"' + courseid + '\"]').addClass('fa-star-o');\n            if (islight) {\n                that.removeClass('fa-star');\n                that.addClass('fa-star-o');\n                that.removeClass('remove-from-favorites-handle');\n                that.addClass('add-to-favorites-handle');\n            }\n\n            // Find and reload favorites.\n            // DO NOT RELOAD FAVORITES ON COURSE INDEX\n        }\n\n    };\n\n    return localmy;\n\n});\n"],"file":"local_my_course_index.min.js"}