{"version":3,"sources":["../src/local_my_course_index.js"],"names":["define","$","cfg","log","init","on","toggle_detail","add_to_favorites","remove_from_favorites","length","hide","attr","each","debug","trigger","usereloadwaiter","that","courseid","islight","hasClass","url","wwwroot","removeClass","addClass","get"],"mappings":"AAwBAA,OAAM,kCAAC,CAAC,QAAD,CAAW,aAAX,CAA0B,UAA1B,CAAD,CAAwC,SAASC,CAAT,CAAYC,CAAZ,CAAiBC,CAAjB,CAAsB,CAuFhE,MAhFyB,CAErBC,IAAI,CAAE,eAAW,CAGbH,CAAC,CAAC,uBAAD,CAAD,CAA2BI,EAA3B,CAA8B,OAA9B,CAAuC,gBAAvC,CAAyD,EAAzD,CAA6D,KAAKC,aAAlE,EACAL,CAAC,CAAC,uBAAD,CAAD,CAA2BI,EAA3B,CAA8B,OAA9B,CAAuC,0BAAvC,CAAmE,EAAnE,CAAuE,KAAKE,gBAA5E,EACAN,CAAC,CAAC,uBAAD,CAAD,CAA2BI,EAA3B,CAA8B,OAA9B,CAAuC,+BAAvC,CAAwE,EAAxE,CAA4E,KAAKG,qBAAjF,EAEA,GAAkC,CAA9B,GAAAP,CAAC,CAAC,eAAD,CAAD,CAAmBQ,MAAvB,CAAqC,CAEjCR,CAAC,CAAC,gCAAD,CAAD,CAAoCS,IAApC,GACAT,CAAC,CAAC,+CAAD,CAAD,CAAmDU,IAAnD,CAAwD,eAAxD,CAAyE,OAAzE,CACH,CAGDV,CAAC,CAAC,eAAD,CAAD,CAAmBW,IAAnB,CAAwB,UAAW,CAC/BT,CAAG,CAACU,KAAJ,CAAU,wBAA0BZ,CAAC,CAAC,IAAD,CAAD,CAAQU,IAAR,CAAa,aAAb,CAA1B,CAAwD,GAAxD,CAA8DV,CAAC,CAAC,IAAD,CAAD,CAAQU,IAAR,CAAa,UAAb,CAAxE,EACAV,CAAC,CAAC,IAAD,CAAD,CAAQa,OAAR,CAAgB,OAAhB,CACH,CAHD,EAIA,KAAKC,eAAL,IAEAZ,CAAG,CAACU,KAAJ,CAAU,0BAAV,CAEH,CAxBoB,CA0BrBN,gBAAgB,CAAE,2BAAW,IAErBS,CAAAA,CAAI,CAAGf,CAAC,CAAC,IAAD,CAFa,CAIrBgB,CAAQ,CAAGD,CAAI,CAACL,IAAL,CAAU,aAAV,CAJU,CAKrBO,CAAO,CAAGF,CAAI,CAACG,QAAL,CAAc,OAAd,CALW,CAOrBC,CAAG,CAAGlB,CAAG,CAACmB,OAAJ,CAAc,4BAPC,CAQzBD,CAAG,EAAI,sBAAP,CACAA,CAAG,EAAI,aAAeH,CAAtB,CACAD,CAAI,CAACM,WAAL,CAAiB,WAAjB,EACAN,CAAI,CAACO,QAAL,CAAc,SAAd,EACA,GAAIL,CAAJ,CAAa,CACTF,CAAI,CAACM,WAAL,CAAiB,yBAAjB,EACAN,CAAI,CAACO,QAAL,CAAc,8BAAd,CACH,CAEDpB,CAAG,CAACU,KAAJ,CAAU,iBAAmBI,CAAnB,CAA8B,eAAxC,EACAhB,CAAC,CAACuB,GAAF,CAAMJ,CAAN,CAIH,CAhDoB,CAkDrBZ,qBAAqB,CAAE,gCAAW,IAE1BQ,CAAAA,CAAI,CAAGf,CAAC,CAAC,IAAD,CAFkB,CAI1BgB,CAAQ,CAAGD,CAAI,CAACL,IAAL,CAAU,aAAV,CAJe,CAK1BO,CAAO,CAAGF,CAAI,CAACG,QAAL,CAAc,OAAd,CALgB,CAO1BC,CAAG,CAAGlB,CAAG,CAACmB,OAAJ,CAAc,4BAPM,CAQ9BD,CAAG,EAAI,2BAAP,CACAA,CAAG,EAAI,aAAeH,CAAtB,CAEAd,CAAG,CAACU,KAAJ,CAAU,mBAAqBI,CAArB,CAAgC,iBAA1C,EACAhB,CAAC,CAACuB,GAAF,CAAMJ,CAAN,EAGAnB,CAAC,CAAC,gCAAiCgB,CAAjC,CAA4C,KAA7C,CAAD,CAAoDK,WAApD,CAAgE,SAAhE,EACArB,CAAC,CAAC,gCAAiCgB,CAAjC,CAA4C,KAA7C,CAAD,CAAoDM,QAApD,CAA6D,WAA7D,EACA,GAAIL,CAAJ,CAAa,CACTF,CAAI,CAACM,WAAL,CAAiB,SAAjB,EACAN,CAAI,CAACO,QAAL,CAAc,WAAd,EACAP,CAAI,CAACM,WAAL,CAAiB,8BAAjB,EACAN,CAAI,CAACO,QAAL,CAAc,yBAAd,CACH,CAIJ,CA5EoB,CAkF5B,CAzFK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript controller for controlling the sections.\n *\n * @module     block_multicourse_navigation/collapse_control\n * @package    block_multicourse_navigation\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n// jshint unused: false, undef:false\n/* eslint-disable no-undef no-unused-vars */\ndefine(['jquery', 'core/config', 'core/log'], function($, cfg, log) {\n\n    /**\n     * SectionControl class.\n     *\n     * @param {String} selector The selector for the page region containing the actions panel.\n     */\n    var localmycourseindex = {\n\n        init: function() {\n\n            // Attach delegated togglestate handler to all handles in page.\n            $('.course_category_tree').on('click', '.detail-handle', [], this.toggle_detail);\n            $('.course_category_tree').on('click', '.add-to-favorites-handle', [], this.add_to_favorites);\n            $('.course_category_tree').on('click', '.remove-from-favorites-handle', [], this.remove_from_favorites);\n\n            if ($('.is-accordion').length !== 0) {\n                // Is in accordion\n                $('.is-accordion .local-my-course').hide();\n                $('.is-accordion .local-my-cat-collapse > h3 > a').attr('aria-expanded', 'false');\n            }\n\n            // Launch lazy loading of all area place-holders.\n            $('.reload-areas').each(function() {\n                log.debug(\"Launching refresh on \" + $(this).attr('data-widget') + '-' + $(this).attr('data-uid'));\n                $(this).trigger('click');\n            });\n            this.usereloadwaiter = true;\n\n            log.debug('AMD Local My initialized');\n\n        },\n\n        add_to_favorites: function() {\n\n            var that = $(this);\n\n            var courseid = that.attr('data-course');\n            var islight = that.hasClass('light');\n\n            var url = cfg.wwwroot + '/local/my/ajax/service.php';\n            url += '?what=addtofavorites';\n            url += '&courseid=' + courseid;\n            that.removeClass('fa-star-o');\n            that.addClass('fa-star');\n            if (islight) {\n                that.removeClass('add-to-favorites-handle');\n                that.addClass('remove-from-favorites-handle');\n            }\n\n            log.debug(\"Adding course \" + courseid + \" to favorites\");\n            $.get(url);\n\n            // Find and reload favorites.\n            // DO NOT RELOAD FAVORITES ON COURSE INDEX\n        },\n\n        remove_from_favorites: function() {\n\n            var that = $(this);\n\n            var courseid = that.attr('data-course');\n            var islight = that.hasClass('light');\n\n            var url = cfg.wwwroot + '/local/my/ajax/service.php';\n            url += '?what=removefromfavorites';\n            url += '&courseid=' + courseid;\n\n            log.debug(\"Removing course \" + courseid + \" from favorites\");\n            $.get(url);\n\n            // find on screen icon-favorites of this course and change class.\n            $('.icon-favorite[data-course=\"' + courseid + '\"]').removeClass('fa-star');\n            $('.icon-favorite[data-course=\"' + courseid + '\"]').addClass('fa-star-o');\n            if (islight) {\n                that.removeClass('fa-star');\n                that.addClass('fa-star-o');\n                that.removeClass('remove-from-favorites-handle');\n                that.addClass('add-to-favorites-handle');\n            }\n\n            // Find and reload favorites.\n            // DO NOT RELOAD FAVORITES ON COURSE INDEX\n        }\n\n    };\n\n    return localmycourseindex;\n\n});\n"],"file":"local_my_course_index.min.js"}